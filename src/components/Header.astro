---
import { SITE_TITLE } from "../consts";
import HeaderLink from "./HeaderLink.astro";
import ThemeIcon from "./ThemeIcon.astro";

const navLinks = [
  { href: "/", text: "Home" },
  { href: "/tourosaka", text: "Osaka Info" },
  { href: "/blog", text: "Blog" },
  { href: "/about", text: "About" },
];
---

<header class="m-0 px-4 shadow-md">
  <nav class="flex items-center justify-between">
    <h2 class="m-0 text-base">
      <a
        href="/"
        class="no-underline text-black dark:text-white"
      >
        {SITE_TITLE}
      </a>
    </h2>

    <!-- Desktop Menu -->
    <div class="hidden md:flex gap-4">
      {navLinks.map((link) => (<HeaderLink href={link.href}>{link.text}</HeaderLink>))}
    </div>

    <!-- Mobile Controls (Right side) -->
    <div class="md:hidden flex items-center gap-2 ml-auto">
      <ThemeIcon />
      <button
        id="menu-btn"
        class="flex flex-col gap-1.5 p-2 text-black dark:text-white"
      >
        <span class="w-6 h-0.5 bg-current transition-all duration-300"></span>
        <span class="w-6 h-0.5 bg-current transition-all duration-300"></span>
        <span class="w-6 h-0.5 bg-current transition-all duration-300"></span>
      </button>
    </div>

    <!-- Desktop ThemeIcon -->
    <div class="hidden md:flex">
      <ThemeIcon />
    </div>
  </nav>

  <!-- Mobile Menu -->
  <div
    id="mobile-menu"
    class="hidden md:hidden flex flex-col gap-4 py-4 border-t border-gray-200 dark:border-gray-700"
  >
    {navLinks.map((link) => (<HeaderLink href={link.href}>{link.text}</HeaderLink>))}
  </div>
</header>

<script is:inline>
  const menuBtn = document.getElementById("menu-btn");
  const mobileMenu = document.getElementById("mobile-menu");

  menuBtn?.addEventListener("click", () => {
    mobileMenu?.classList.toggle("hidden");
  });
</script>
